---
title: 日本筑波自动驾驶比赛记录
date: 2019-11-18 20:56:32
categories: 
tags:
- 
---

# 筑波自动驾驶比赛记录

筑波自动驾驶比赛始从2007年开始，每年秋天都会举行，今年已经是第13个年头。地点在 **学園都市駅**，该地位于日本关东地区筑波市市政府办公楼附近。在日本只有筑波市允许机器人在普通车道上行走，每年都受到日本各方面的广泛关注。



##  

![左2是我（薛经纬），左1为我们青柳教授](https://user-images.githubusercontent.com/50350039/133486577-70338b3e-2d3b-4a19-9dfc-a3bcc34c5d60.jpg)





![](https://user-images.githubusercontent.com/50350039/133486814-87a7b8cf-bfc7-4971-a9c6-7f96d69834dd.jpg)





- # 比赛的具体内容

  如图所示，粉色区域为此次比赛的路线。

  本次比赛难点在于公园非常开阔，参照物非常少，激光雷达能够录入的信息比较少。例外，因为没有使用GPS，非常难定位。（建好的地图很难闭环）

  因此参赛的66个队伍，最终跑完全程的只有2个队伍。

  ![d93c762f2dd418d9ce8a21e6a46147d](https://user-images.githubusercontent.com/50350039/133487348-f0cad685-7477-47cd-bfdb-6fd77a0b8290.png)

  ## 附加项目

  在市政府大楼内部，不准提前收集数据的情况下，让机器人边走边建图。机器人从侧门进，转90度角，从正门出。

  附加项目难点在于 : 正门出入口的地方没有明显的标志，很难判断正门的位置。例外，正门是玻璃感应电动门，机器人不太容易进出。

  因此，66个队伍，其中只有1个队伍完成比赛。



​				![](https://user-images.githubusercontent.com/50350039/133577255-4ef7735a-af61-448b-b77c-995c5d54efe3.png)









## 参赛过程

#### （1）2019年11月5日 15：06

​				打包机器人，快递发往筑波市。黑猫家的jitbox很大，随便装。

![](https://user-images.githubusercontent.com/50350039/133566195-089c371c-7729-4e95-abce-7b5fdaa4547c.png)





#### （2）2019年11月7日 22：04
老师用研究室的经费，给我们买了去往筑波夜行巴士的票，毎张票9100日元。如下图，我们就是坐这样的车坐了一宿，这样的座位9100(合人民币540元)日元稍微有点不值。不过，车上的绿茶随便喝，还不错。

![](https://user-images.githubusercontent.com/50350039/133566933-3f5559ff-408f-4ebd-b30c-86b14f378fc9.jpg)





#### （3）2019年11月8日（第1天） 06：11

到达筑波市。

![](https://user-images.githubusercontent.com/50350039/133567504-3b2765aa-17df-4f0f-8688-da841a080af5.png)







#### （4）2019年11月8日（第1天） 09：01

之前寄的jitbox的物流终于送到啦，取货。

![](https://user-images.githubusercontent.com/50350039/133567699-184a0f81-4b3a-4711-afe0-7257c86f532a.png)







####  （5）2019年11月8日（第1天） 10：11

大会正式开始，一共66支队伍，每支队伍有5-10个人。

会场临时搭建，所以非常简陋。如下图所示，参赛选手都坐在地上认真听比赛规则，安全事项等等。

![](https://user-images.githubusercontent.com/50350039/133568094-86f8a689-52b1-4192-9414-a44ad9057d19.png)



![](https://user-images.githubusercontent.com/50350039/133568153-9feefb27-e682-42e7-936b-4360d7ac4f6e.png)





各个大学开始接受车检（检查车辆是否符合比赛要求，是否有违规设计，是否安全）。

![](https://user-images.githubusercontent.com/50350039/133568309-873ba927-c977-46c7-84f7-f65dee77f814.jpg)





#### （6）2019年11月8日（第1天）11：50

​		接下的任务就是组装机器人，每一次参加比赛都要吧机器人拆的七零八落，然后再重新组装。组装的过程需很繁琐，需要很多人齐心协力才能装好。

​		为了更方便的组装，以后一定要进行改进。





​					![正在组装机器人](https://user-images.githubusercontent.com/50350039/133569505-83a3fa47-35ea-4816-bc21-1b3197e24ee6.png)







#### （7）2019年11月8日（第1天）14：50

​		机器人从start点出发，开始收集数据进行建图。start点有左右两处，正式比赛的时候随机从其中一处出发。

​		我们的机器人主要是利用Velodyne的3维16线激光雷达探测周围环境。

​		最后形成点云图保存下来。

![](https://user-images.githubusercontent.com/50350039/133570336-f137078c-26c3-426c-8074-db7c2af8a747.png)

​	



### （8）2019年11月8日（第1天）15：55

​		非常遗憾，硬盘之前不知道被谁给塞满了。很难再装下足够的激光雷达的数据。

​		由于硬盘占满，不能写入，数据造成bag文件记录中断。

​		由于不清楚是何时开始中断的，所以恢复不完整的bag文件失败，只能全部删除重新录入数据。

​		

### （9）2019年11月8日（第1天）17：31

​		收拾行李回宾馆，讨论第二天策略。发现宾馆的电视机当显示器用非常合适。

​		与之相比，我们带来的8寸小显示器真的很刺眼。

![](https://user-images.githubusercontent.com/50350039/133570655-b161895b-beed-4866-ba65-10f1886d1ee7.png)





#### （10）2019年11月9日（第2天）08：13
​			宾馆提供的自助早饭真的好丰富，没少吃。

![](https://user-images.githubusercontent.com/50350039/133570795-a6927cc3-7526-4852-b055-0a6affb60771.png)







#### （11）2019年11月9日（第2天）10：00

第二天，也就是正式比赛前一天，明显来测试的队伍明显变多了。好几个月前就已经开始实地测试了，我们离得比较远只给了我们2天时间测试，很多东京本地的参赛队伍早已经测试完毕，由于我们离得比较远（在大阪）正式比赛之前两天我们才开始正式测试，非常匆忙。上午采集完数据后，利用中午吃饭时间，让电脑运行SLAM生成地图数据。

![排队等待出发](https://user-images.githubusercontent.com/50350039/133571298-8a0d783f-06eb-46bf-a8bf-3a2a826f9bd9.png)

![“我们也到达终点了”](https://user-images.githubusercontent.com/50350039/133571378-5ce6fbb1-8c5a-48fb-8f6f-511dd2137031.png)



![合影留念庆祝“胜利”](https://user-images.githubusercontent.com/50350039/133571424-76580e96-9012-48d5-bd19-ffaa37022563.png)





### （12）2019年11月9日（第2天）14：30

​		下午，终于把地图生成完了。我们收集数据，绕场地跑了1圈花了1小时，SLAM和生成waypoint需要2小时左右。其实还有很大优化空间，由于时间原因准备不充分。





### （13）2019年11月9日（第2天）15：00

​		大概近3点的时候，我们开始了第一次正式跑。

​		无人驾驶，第一次自动行走，一切很顺利，第一个绕圈也很顺利通过。



![](https://user-images.githubusercontent.com/50350039/133571734-363d48ff-a646-445b-9d53-568f9646eba6.png)



#### 直到。。。。直到这个地方，小车就一直卡住不前行。



​	![](https://user-images.githubusercontent.com/50350039/133571883-177b2cda-5f2b-4fcd-befe-407de6ec283b.png)





分析发现，是地图上的两个杂点导致电脑认为这里有障碍物，死活绕不过去。

![](https://user-images.githubusercontent.com/50350039/133571995-37ceb408-ca7e-43c3-940a-c413cf6127bb.png)

重新录制一份完整地图后，刚刚那个卡住的地方虽然通过了，但是从市役所广场到街道的地方跑偏了。

又重新采集了一份从start到红绿灯附近的地图后，当天的活动也结束了。

当天的晚餐我们吃的是回转寿司，我头一次见我的同学（小潘）死命地往寿司上面放芥末，而且吃的很享受。我也试了一下，日本的芥末真的不错。就是有点串脑门。

![](https://user-images.githubusercontent.com/50350039/133573170-8f20f21a-0643-4dc9-bd3a-b0f206314368.png)







####  （14）2019年11月9日（第2天）19：23、

通过用大显示屏查看数据后，发现小车卡住不动的地方，明显有两个杂点（障碍物）。白天在比赛场进行自动行驶测试的时候，通过小显示屏就是看不出来有杂点，由此可见，小显示屏真的不适合数据的检查。

![](https://user-images.githubusercontent.com/50350039/133573454-45f6e122-579a-40ab-95ea-4eee51ad005c.png)



​	![](https://user-images.githubusercontent.com/50350039/133573721-d0b15070-666e-44ad-bd91-4f1775ae8439.png)	





最后建好的地图，如下图所示，非常扭曲。所有拐弯的地方都应该是直角，但事实上都没有成为直角。这个问题是以前没有遇到过的，没来参见比赛之前，我们生成的地图直角弯是90度。通过调整电机编码器算法后，问题解决了。

![](https://user-images.githubusercontent.com/50350039/133573926-c1040175-b376-4c15-8181-92e1b9b47604.png)













#### （15）2019年11月10日（第3天）11：00

 比赛正式开始，电视台来采访，参赛队伍一个个排队等着出发，主持人问候毎支队伍，Youtube上有比赛视频。



![](https://user-images.githubusercontent.com/50350039/133574259-837f92a1-1634-40c7-88ff-63f9b7176840.png)

![](https://user-images.githubusercontent.com/50350039/133574377-aa775e78-58dc-4b10-a225-fdc4a0a58c24.png)



这个红色的小车是群马大学的，获得本次比赛第一名，我和群马大学参赛队队长交流了一下，收获很大。

![](https://user-images.githubusercontent.com/50350039/133574499-1e4492c2-2ff9-41fa-a88e-79dc8fbfa3dc.png)





 中午，老师请我们吃麦当劳，很不错。

​	![](https://user-images.githubusercontent.com/50350039/133574624-cd7305cf-ca11-45e5-8b3d-e3c222b6da6d.png)





#### （16）2019年11月10日（第3天）15：00

​	该我们出场了，前面的小车挂的早，我们一路畅通无阻。

![](https://user-images.githubusercontent.com/50350039/133574780-163e8b7a-61d4-404c-b045-7254b8271b1e.png)

可惜，再次”死“在前一天从市役所广场去大马路上的那个位置，虽然手动把waypoint向外侧移了很多，但是小车还是向内跑。



#### （17）2019年11月10日（第3天）19：00

主办方组织的参赛者晚宴，我们吃了好多，也和很多队伍进行了交流。获得No.1的群马大学和企业合作开发，基本没有使用开源代码，主要都是自己原创的算法。他们使用的激光雷达不是大家常用的3D而是4D的，也就是在生成的点云坐标上加上了反射率，能够更好的识别周围环境。具体算法是他们没有公开，估计是用了AI算法之类的技术。

![](https://user-images.githubusercontent.com/50350039/133575045-9c1e2e29-0e32-4f59-8e7f-d74ea9f82e3d.png)



​	![](https://user-images.githubusercontent.com/50350039/133575120-61b4920c-ab00-475b-80b0-7d0bd5cbf71e.png)



![](https://user-images.githubusercontent.com/50350039/133575263-646fd986-22b5-4b82-840f-33f4bf046cf1.jpg)



#### （18）2019年11月11日（第4天）白天

11月10日晚上，两名日本同学提前回去了，我和另一个中国同学负责今天把机器人寄回去。然后，我们去东京玩了一圈。

![](https://user-images.githubusercontent.com/50350039/133575437-6de6269a-ea50-4c83-9e63-f47398c0cfa6.png)



![](https://user-images.githubusercontent.com/50350039/133575512-758567e7-9553-445b-bfb4-6455d8440548.png)



![](https://user-images.githubusercontent.com/50350039/133575644-785ccb9a-5227-40e8-bfdf-f7d9e3fb8d8f.png)



​		![](https://user-images.githubusercontent.com/50350039/133575831-3969a673-1baf-4ff3-bb42-e339b5e53168.png)













#### 回到家后，我的小猫咪瞪着一双忧怨的大眼睛等着我回来。

![](https://user-images.githubusercontent.com/50350039/133576454-ed96be7f-698c-46bb-a8b4-af1439195466.jpg)
